<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Individual post</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    
    <link rel="stylesheet" href="/gen-style.css">
</head>

<body>

    <%- include('../partials/navbar-admin')-%>

    <div id="container" class="container my-auto">
        <h1><%=grabbyid.title%></h1>
        <div><%=grabbyid.date.toLocaleString()%></div>
        <button class="btn btn-primary my-2" id="btnedit" data=<%=grabbyid._id%>>Edit</button>
        <form action='/admin/post/delete/<%=grabbyid._id%>?_method=DELETE' method="post">
            <button class="btn btn-primary my-2" type="submit">Delete Post</button>
        </form>
        <div><%-grabbyid.desc%></div>

        <%- include('../user/_display_all_comment') %>

        <div id="commentform">
            <h4>Leave a reply:</h4>
            <form action="/user/post/add_comment" method="post">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" class="form-control" name="username" id="username">
                </div>
        
                <div class="form-group">
                    <label for="write_comment">Your Comment</label>
                    <textarea name="write_comment" class="form-control" id="write_comment" rows="5"
                        placeholder="Write your Comment here"></textarea>
                </div>
        
                <!-- post req. me id pahuchane ke liye  -->
                <input type="hidden" name="getid" value="<%=grabbyid._id%>">
        
                <!-- post req. me timeofcomment pahuchane ke liye -->
                <input type="hidden" name="timeofcomment" value="<%=new Date%>">
        
                <button type="submit" class="btn btn-success mb-3">Post Comment</button>
            </form>
        </div>

    </div>

    <%- include('../partials/footer')-%>

    <script>        //direct script use kar ya phir link kar de (gen-script se)
        // alert("test")
        document.getElementById('btnedit').addEventListener('click', (e) => {
            // console.log(e.target)
            document.location.href = `http://localhost:5000/admin/post/edit/${e.target.getAttribute('data')}`
        })

    </script>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
        crossorigin="anonymous"></script>

</body>

</html>